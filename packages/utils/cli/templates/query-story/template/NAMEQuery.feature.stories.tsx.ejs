import React from 'react';
import { use<%= props.pascalCaseName %>Query } from '@novecirculos/<%= props.kebabCaseParent %>-network';
import { Scaffold } from '../../../components/Scaffold';
import { AuthEnsurer } from '../../../components/AuthEnsurer';
import ReactJson from 'react-json-view';

const config = {
  title: 'Network/<%= props.pascalCaseParent %>/Queries/use<%= props.pascalCaseName %>Query',
};

export default config;

export const Default = () => {
  return (
    <Scaffold>
      <AuthEnsurer>
        <ComponentUsing<%= props.pascalCaseName %> />
      </AuthEnsurer>
    </Scaffold>
  );
};

const ComponentUsing<%= props.pascalCaseName %> = () => {
  const { data, status } = use<%= props.pascalCaseName %>Query();

  if (!data && status === 'error') {
    return (
      <section>
        <h1 className="text-white text-center">
          An error happened, check query.
        </h1>
      </section>
    );
  }

  return (
    <section>
      <ReactJson theme="google" src={data ?? {}} />
    </section>
  );

};
